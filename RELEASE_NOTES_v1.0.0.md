# BetterTranslate v1.0.0 - Complete Release 🎉

**AI-powered YAML locale file translator for Rails and Ruby projects**

This is the first complete release of BetterTranslate, featuring multi-provider AI translation support, comprehensive testing infrastructure, and production-ready features.

## 🚀 Quick Start

```bash
# Install the gem
gem install better_translate

# Try the interactive demo
git clone https://github.com/alessiobussolari/better_translate.git
cd better_translate
bundle install
export OPENAI_API_KEY=your_key_here
ruby spec/dummy/demo_translation.rb
```

## ✨ Key Features

### Multi-Provider AI Support
- **ChatGPT** (GPT-5-nano) - Fast, excellent quality
- **Google Gemini** (gemini-2.0-flash-exp) - Very fast, cost-effective
- **Anthropic Claude** (Claude 3.5) - Excellent quality (coming soon)

### Translation Features
- 🎯 **Smart Strategies**: Automatic selection between deep (<50 strings) and batch (≥50 strings) translation
- ⚡ **Intelligent Caching**: LRU cache with optional TTL reduces API costs
- 🔄 **Translation Modes**: Override (replace all) or Incremental (merge with existing)
- 🚫 **Flexible Exclusions**: Global + language-specific exclusion rules
- 🎨 **Domain Context**: Provide context for medical, legal, financial, or technical terminology
- 📊 **Similarity Analysis**: Built-in Levenshtein distance analyzer

### Production-Ready Quality
- 🧪 **259 Tests** passing with 90%+ coverage
- 🎬 **VCR Integration**: 18 cassettes (260KB) with real API responses
- 🏗️ **Rails Dummy App**: Interactive demo with real translations
- 📚 **Complete Documentation**: README, YARD docs, usage guides
- 🛡️ **Type-Safe**: RBS signatures with Steep type checking
- ✅ **RuboCop Compliant**: Clean, consistent code style

### Rails Integration
```bash
# Generate initializer
rails generate better_translate:install

# Configure in config/initializers/better_translate.rb
BetterTranslate.configure do |config|
  config.provider = :chatgpt
  config.openai_key = ENV["OPENAI_API_KEY"]
  config.source_language = "en"
  config.target_languages = [
    { short_name: "it", name: "Italian" },
    { short_name: "fr", name: "French" }
  ]
  config.input_file = "config/locales/en.yml"
  config.output_folder = "config/locales"
end

# Translate all files
BetterTranslate.translate_all
```

## 📖 Documentation

- **[README.md](README.md)** - Complete feature documentation
- **[USAGE_GUIDE.md](spec/dummy/USAGE_GUIDE.md)** - Interactive demo guide
- **[VCR Testing Guide](spec/integration/README.md)** - Integration testing with VCR
- **[CLAUDE.md](CLAUDE.md)** - Developer guide for contributors
- **[CHANGELOG.md](CHANGELOG.md)** - Detailed changelog

## 🎬 Demo Output

```yaml
# en.yml (input)
en:
  hello: "Hello"
  users:
    greeting: "Hello %{name}"
  messages:
    success: "Operation completed successfully"

# it.yml (generated by BetterTranslate)
it:
  hello: "Ciao"
  users:
    greeting: "Ciao %{name}"  # ✅ Variables preserved!
  messages:
    success: "Operazione completata con successo"

# fr.yml (generated by BetterTranslate)
fr:
  hello: "Bonjour"
  users:
    greeting: "Bonjour %{name}"  # ✅ Variables preserved!
  messages:
    success: "Opération réussie"
```

## 🏗️ Architecture Highlights

### Provider Architecture
```
BaseHttpProvider (abstract)
├── ChatGPTProvider (GPT-5-nano, temp=1.0)
├── GeminiProvider (gemini-2.0-flash-exp)
└── AnthropicProvider (coming soon)
```

**BaseHttpProvider features:**
- Faraday-based HTTP communication
- Retry logic with exponential backoff (3 attempts)
- Rate limiting (0.5s between requests, thread-safe)
- Configurable timeouts (default: 30s)

### Core Components
- **Configuration**: Type-safe config with validation
- **Cache**: Thread-safe LRU cache with optional TTL
- **RateLimiter**: Thread-safe request throttling
- **Validator**: Comprehensive input validation
- **HashFlattener**: Nested YAML ↔ flat structure conversion
- **VariableExtractor**: Preserves `%{name}` and `%<name>s` placeholders
- **ProgressTracker**: Real-time translation progress

### Error Hierarchy
```
BetterTranslate::Error (base)
├── ConfigurationError
├── ValidationError
├── TranslationError
├── ProviderError
├── ApiError
├── RateLimitError
├── FileError
├── YamlError
└── ProviderNotFoundError
```

## 🧪 Testing Infrastructure

```
spec/
├── better_translate/           # 259 unit tests
│   ├── cache_spec.rb
│   ├── providers/
│   └── ...
├── integration/                # VCR integration tests
│   ├── chatgpt_integration_spec.rb
│   ├── gemini_integration_spec.rb
│   └── rails_dummy_app_spec.rb
├── dummy/                      # Rails dummy app
│   ├── demo_translation.rb     # 🚀 Interactive demo
│   └── config/locales/
│       ├── en.yml              # Source (16 keys)
│       ├── it.yml              # Generated (519 bytes)
│       └── fr.yml              # Generated (511 bytes)
└── vcr_cassettes/              # 18 cassettes (260KB)
    ├── chatgpt/ (7)
    ├── gemini/ (7)
    └── rails/ (4)
```

## 📦 Package Details

- **Gem Name**: `better_translate`
- **Version**: `1.0.0`
- **Size**: 83KB
- **Files**: 152 files
- **Lines of Code**: 23,654
- **Ruby Version**: >= 3.0.0
- **Dependencies**: Faraday ~> 2.0 (only runtime dependency)

## 🔧 Configuration Examples

### Medical Terminology
```ruby
config.translation_context = "Medical terminology for healthcare applications"
config.target_languages = [{ short_name: "es", name: "Spanish" }]
# "patient" → "paciente", "diagnosis" → "diagnóstico"
```

### E-commerce with Exclusions
```ruby
config.global_exclusions = ["brand_name", "sku"]  # Never translate
config.exclusions_per_language = {
  "de" => ["legal.terms"],  # German legal terms manually translated
  "fr" => ["marketing.slogan"]  # French slogan crafted by marketing
}
```

### Incremental Mode
```ruby
config.translation_mode = :incremental
# Only translates missing keys, preserves manual corrections
```

## 🚦 Performance

**Demo Results** (16 keys, 2 languages):
- Italian: 16 strings in 1m 6s (~4s per string)
- French: 16 strings in 1m 7s (~4s per string)
- **Total**: 32 translations in 2m 13s

**With Caching Enabled**:
- Subsequent runs: < 1s (cache hits)
- API costs reduced by ~90%

## 🤝 Contributing

Contributions are welcome! Please see [CLAUDE.md](CLAUDE.md) for development guidelines.

**Development Requirements**:
1. TDD (Test-Driven Development) - Write tests first
2. YARD Documentation - Document all public methods
3. RuboCop Compliance - Clean code style
4. VCR Cassettes - Record integration tests

## 📜 License

MIT License - See [LICENSE.txt](LICENSE.txt)

## 🙏 Acknowledgments

Built with:
- **Faraday** - HTTP client
- **VCR** - HTTP interaction recording
- **RSpec** - Testing framework
- **RuboCop** - Code linting
- **Steep** - Type checking
- **YARD** - Documentation

---

**Made with ❤️ by [Alessio Bussolari](https://github.com/alessiobussolari)**

**Powered by Claude Code** 🤖

[Report Bug](https://github.com/alessiobussolari/better_translate/issues) · [Request Feature](https://github.com/alessiobussolari/better_translate/issues) · [Documentation](https://github.com/alessiobussolari/better_translate)
